-- MySQL Script generated by MySQL Workbench
-- Thu May  3 10:32:17 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema public
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema public
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `public` DEFAULT CHARACTER SET utf8 ;
USE `public` ;

-- -----------------------------------------------------
-- Table `public`.`TIPO_USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`TIPO_USUARIO` (
  `TUS_IDTIPO` INT NOT NULL AUTO_INCREMENT,
  `TUS_NOME` VARCHAR(255) NOT NULL,
  `TUS_DESCRICAO` TEXT NOT NULL,
  PRIMARY KEY (`TUS_IDTIPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`USUARIO` (
  `USU_IDUSUARIO` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USU_LOGIN` VARCHAR(45) NOT NULL,
  `USU_SENHA` VARCHAR(255) NOT NULL,
  `USU_NASCIMENTO` DATE NULL,
  `USU_CPF` VARCHAR(15) NULL,
  `USU_NOME` VARCHAR(255) NULL,
  `USU_EMAIL` VARCHAR(255) NULL,
  `USU_CONFIABILIDADE` INT NOT NULL,
  `USU_TIPO` INT NULL,
  `USU_TELEFONE` VARCHAR(30) NULL,
  `USU_DATA_CADASTRO` TIMESTAMP NULL,
  PRIMARY KEY (`USU_IDUSUARIO`),
  INDEX `TIP_IDTIPO_idx` (`USU_TIPO` ASC),
  CONSTRAINT `TIPO_USUARIO`
    FOREIGN KEY (`USU_TIPO`)
    REFERENCES `public`.`TIPO_USUARIO` (`TUS_IDTIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`ORG_ORGAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`ORG_ORGAO` (
  `ORG_IDORGAO` INT NOT NULL AUTO_INCREMENT,
  `ORG_NOME` VARCHAR(255) NOT NULL,
  `ORG_DESCRICAO` VARCHAR(255) NULL,
  PRIMARY KEY (`ORG_IDORGAO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`DESORDEM`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`DESORDEM` (
  `DES_IDDESORDEM` INT NOT NULL AUTO_INCREMENT,
  `DES_TIPO` INT NOT NULL,
  `DES_DESCRICAO` TEXT NULL,
  `ORG_IDORGAO` INT NOT NULL,
  PRIMARY KEY (`DES_IDDESORDEM`),
  INDEX `fk_DES_DESORDEM_ORG_ORGAO1_idx` (`ORG_IDORGAO` ASC),
  CONSTRAINT `fk_DES_DESORDEM_ORG_ORGAO1`
    FOREIGN KEY (`ORG_IDORGAO`)
    REFERENCES `public`.`ORG_ORGAO` (`ORG_IDORGAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
  INDEX 'fk_TIPO_DESORDEM_idx' ('TDE_IDTIPO_DESORDEM' ASC),
  CONSTRAINT 'fk_TIPO_DESORDEM' 
    FOREIGN KEY ('DES_TIPO')
    REFERENCES 'public'.'TIPO_DESORDEM' ('TDE_IDTIPO_DESORDEM')
    ON UPDATE NO ACTION
    ON DELETE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`DENUNCIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`DENUNCIA` (
  `DEN_IDDENUNCIA` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `DEN_IDDESORDEM` INT NOT NULL,
  `DEN_IDUSUARIO` BIGINT(20) NOT NULL,
  `DEN_DATAHORA_REGISTRO` DATETIME NOT NULL,
  `DEN_DATAHORA_OCORREU` DATETIME NOT NULL,
  `DEN_DATAHORA_SOLUCAO` DATETIME,
  `DEN_STATUS` VARCHAR(255) NOT NULL,
  `DEN_NIVEL_CONFIABILIDADE` INT NOT NULL,
  `DEN_LOCAL_DESORDEM` GEOMETRY NOT NULL,
  `DEN_DESCRICAO` TEXT NULL,
  `DEN_ANONIMATO` SMALLINT,
  PRIMARY KEY (`DEN_IDDENUNCIA`),
  INDEX `TIPO_DESORDEM_idx` (`DEN_IDDESORDEM` ASC),
  INDEX `USUARIO_idx` (`DEN_IDUSUARIO` ASC),
  CONSTRAINT `TIPO_DESORDEM`
    FOREIGN KEY (`DEN_IDDESORDEM`)
    REFERENCES `public`.`DESORDEM` (`DES_IDDESORDEM`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `USUARIO`
    FOREIGN KEY (`DEN_IDUSUARIO`)
    REFERENCES `public`.`USUARIO` (`USU_IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`ARQUIVOS_CARREGADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`ARQUIVOS_CARREGADOS` (
  `ARQ_IDARQUIVO` INT NOT NULL AUTO_INCREMENT,
  `ARQ_CONTEUDO` BLOB NOT NULL,
  `ARQ_NOME` VARCHAR(45) NOT NULL,
  `ARQ_DATA_ENVIO` TIMESTAMP NOT NULL,
  `ARQ_TAMANHO` INT NOT NULL,
  `ARQ_TIPO` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`ARQ_IDARQUIVO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`VIDEO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`VIDEO` (
  `VID_IDVIDEO` INT NOT NULL,
  `VID_IDDENUNCIA` BIGINT(20) NOT NULL,
  PRIMARY KEY (`VID_IDVIDEO`),
  INDEX `fk_VID_VIDEO_DEN_DENUNCIA1_idx` (`VID_IDDENUNCIA` ASC),
  CONSTRAINT `fk_VID_VIDEO_ARQ_ARQUIVOS_CARREGADOS1`
    FOREIGN KEY (`VID_IDVIDEO`)
    REFERENCES `public`.`ARQUIVOS_CARREGADOS` (`ARQ_IDARQUIVO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VID_VIDEO_DEN_DENUNCIA1`
    FOREIGN KEY (`VID_IDDENUNCIA`)
    REFERENCES `public`.`DENUNCIA` (`DEN_IDDENUNCIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`FOTO_USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`FOTO_USUARIO` (
  `FOT_IDUSUARIO` BIGINT(20) NOT NULL,
  `FOT_IDFOTO` INT NOT NULL,
  PRIMARY KEY (`FOT_IDUSUARIO`),
  INDEX `fk_FOT_FOTO_USUARIO_ARQ_ARQUIVOS_CARREGADOS1_idx` (`FOT_IDFOTO` ASC),
  CONSTRAINT `fk_FOT_FOTO_USUARIO_USU_USUARIO1`
    FOREIGN KEY (`FOT_IDUSUARIO`)
    REFERENCES `public`.`USUARIO` (`USU_IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FOT_FOTO_USUARIO_ARQ_ARQUIVOS_CARREGADOS1`
    FOREIGN KEY (`FOT_IDFOTO`)
    REFERENCES `public`.`ARQUIVOS_CARREGADOS` (`ARQ_IDARQUIVO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`IMAGEM`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`IMAGEM` (
  `IMG_IDDENUNCIA` BIGINT(20) NOT NULL,
  `IMG_IDARQUIVO` INT NOT NULL,
  PRIMARY KEY (`IMG_IDDENUNCIA`, `IMG_IDARQUIVO`),
  INDEX `fk_IMG_IMAGEM_ARQ_ARQUIVOS_CARREGADOS1_idx` (`IMG_IDARQUIVO` ASC),
  CONSTRAINT `fk_IMG_IMAGEM_DEN_DENUNCIA1`
    FOREIGN KEY (`IMG_IDDENUNCIA`)
    REFERENCES `public`.`DENUNCIA` (`DEN_IDDENUNCIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_IMG_IMAGEM_ARQ_ARQUIVOS_CARREGADOS1`
    FOREIGN KEY (`IMG_IDARQUIVO`)
    REFERENCES `public`.`ARQUIVOS_CARREGADOS` (`ARQ_IDARQUIVO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`CONFIRMACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`CONFIRMACAO` (
  `CON_IDCONFIRMACAO` INT NOT NULL AUTO_INCREMENT,
  `CON_IDDENUNCIA` BIGINT(20) NOT NULL,
  `CON_COMENTARIO` TEXT NOT NULL,
  `CON_CONFIRMACAO` INT(1) NOT NULL,
  `CON_DATA_CONFIRMACAO` DATETIME NOT NULL,
  `USU_IDUSUARIO` BIGINT(20) NOT NULL,
  PRIMARY KEY (`CON_IDCONFIRMACAO`),
  INDEX `fk_CON_CONFIRMACAO_DEN_DENUNCIA1_idx` (`CON_IDDENUNCIA` ASC),
  INDEX `fk_CON_CONFIRMACAO_USU_USUARIO1_idx` (`USU_IDUSUARIO` ASC),
  CONSTRAINT `fk_CON_CONFIRMACAO_DEN_DENUNCIA1`
    FOREIGN KEY (`CON_IDDENUNCIA`)
    REFERENCES `public`.`DENUNCIA` (`DEN_IDDENUNCIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CON_CONFIRMACAO_USU_USUARIO1`
    FOREIGN KEY (`USU_IDUSUARIO`)
    REFERENCES `public`.`USUARIO` (`USU_IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`REGIAO_ALERTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`REGIAO_ALERTA` (
  `REG_IDREGIAO_ALERTA` INT NOT NULL AUTO_INCREMENT,
  `USU_IDUSUARIO` BIGINT(20) NOT NULL,
  `REG_REGIAO_ALERTA` POLYGON NULL,
  PRIMARY KEY (`REG_IDREGIAO_ALERTA`),
  INDEX `fk_REG_REGIAO_ALERTA_USU_USUARIO1_idx` (`USU_IDUSUARIO` ASC),
  CONSTRAINT `fk_REG_REGIAO_ALERTA_USU_USUARIO1`
    FOREIGN KEY (`USU_IDUSUARIO`)
    REFERENCES `public`.`USUARIO` (`USU_IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public`.`TIPO_DESORDEM`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public`.`TIPO_DESORDEM` (
  `TDE_IDTIPO_DESORDEM` INT NOT NULL AUTO_INCREMENT,
  `TDE_NOME` VARCHAR(255) NOT NULL,
  `TDE_DESCRICAO` VARCHAR(255) NULL,
  `DES_DESORDEM_DES_IDDESORDEM` INT NOT NULL,
  PRIMARY KEY (`TDE_IDTIPO_DESORDEM`),
  INDEX `fk_TDE_TIPO_DESORDEM_DES_DESORDEM1_idx` (`DES_DESORDEM_DES_IDDESORDEM` ASC),
  CONSTRAINT `fk_TDE_TIPO_DESORDEM_DES_DESORDEM1`
    FOREIGN KEY (`DES_DESORDEM_DES_IDDESORDEM`)
    REFERENCES `public`.`DESORDEM` (`DES_IDDESORDEM`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
